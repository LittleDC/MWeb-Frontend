<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  网络层 - 
  
  </title>
 <meta name="description" content="">
 <link href="atom.xml" rel="alternate" title="" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <h1><a href="index.html"></a></h1>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; </span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>
      
        <li class="divider"></li>
        <li><label>daylife</label></li>

          
            <li><a title="借GitHub/云生成一个小型静态blog？" href="16611834292541.html">借GitHub/云生成一个小型静态blog？</a></li>
          
            <li><a title="我也不知道该写点什么" href="16565998692545.html">我也不知道该写点什么</a></li>
          

      
        <li class="divider"></li>
        <li><label>program</label></li>

          
            <li><a title="Electron" href="16558224788573.html">Electron</a></li>
          
            <li><a title="Java" href="16512220640052.html">Java</a></li>
          
            <li><a title="algorithm" href="16464916020294.html">algorithm</a></li>
          
            <li><a title="nodejs" href="16445062695977.html">nodejs</a></li>
          
            <li><a title="MySQL" href="16417742815461.html">MySQL</a></li>
          

      
        <li class="divider"></li>
        <li><label>network</label></li>

          
            <li><a title="HTTPS" href="16445059759610.html">HTTPS</a></li>
          
            <li><a title="HTTP" href="16434685816689.html">HTTP</a></li>
          
            <li><a title="应用层" href="16429345213468.html">应用层</a></li>
          
            <li><a title="传输层" href="16427785444311.html">传输层</a></li>
          
            <li><a title="网络层" href="16406143899741.html">网络层</a></li>
          
            <li><a title="数据链路层" href="16393212106516.html">数据链路层</a></li>
          
            <li><a title="计算机网络" href="16376768137573.html">计算机网络</a></li>
          

      
        <li class="divider"></li>
        <li><label>JS Pro</label></li>

          
            <li><a title="⭐️期约与异步函数" href="16402238078899.html">⭐️期约与异步函数</a></li>
          
            <li><a title="函数" href="16393591389076.html">函数</a></li>
          
            <li><a title="代理与反射" href="16393584526044.html">代理与反射</a></li>
          
            <li><a title="⭐️对象,类与面对对象编程" href="16382370352660.html">⭐️对象,类与面对对象编程</a></li>
          
            <li><a title="迭代器与生成器" href="16382368417536.html">迭代器与生成器</a></li>
          
            <li><a title="集合应用类型" href="16344851791468.html">集合应用类型</a></li>
          
            <li><a title="红宝书" href="16324468661377.html">红宝书</a></li>
          

      
        <li class="divider"></li>
        <li><label>Vue</label></li>

          
            <li><a title="Principle" href="16417423637971.html">Principle</a></li>
          
            <li><a title="Webpack" href="16401645826486.html">Webpack</a></li>
          
            <li><a title="vue cli" href="16401638058072.html">vue cli</a></li>
          
            <li><a title="vue router" href="16400576847027.html">vue router</a></li>
          

      
        <li class="divider"></li>
        <li><label>React</label></li>

          
            <li><a title="TypeScript" href="16585850262934.html">TypeScript</a></li>
          
            <li><a title="Trick" href="16582426754547.html">Trick</a></li>
          
            <li><a title="React & Vue.js" href="16576366900990.html">React & Vue.js</a></li>
          
            <li><a title="begin" href="16559083526575.html">begin</a></li>
          

      
        <li class="divider"></li>
        <li><label>Trick</label></li>

          
            <li><a title="some tips" href="16559957290588.html">some tips</a></li>
          
            <li><a title="paper" href="16515899913549.html">paper</a></li>
          
            <li><a title="我也不知道这一页该叫什么🧐" href="16347422574488.html">我也不知道这一页该叫什么🧐</a></li>
          

      
        <li class="divider"></li>
        <li><label>work</label></li>

          
            <li><a title="笔试题" href="16512067476067.html">笔试题</a></li>
          
            <li><a title="practice" href="16481332591584.html">practice</a></li>
          
            <li><a title="JS每日一题" href="16471841635278.html">JS每日一题</a></li>
          
            <li><a title="🤯面试记录2" href="16462320184228.html">🤯面试记录2</a></li>
          
            <li><a title="notes" href="16460176233572.html">notes</a></li>
          
            <li><a title="eslint - vue" href="16378340644786.html">eslint - vue</a></li>
          
            <li><a title="烦😶‍🌫️" href="16325412705266.html">烦😶‍🌫️</a></li>
          

      
      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">
                <nav>
                  <ul id="side-nav" class="side-nav">

                    
                      <li class="side-title"><span>daylife</span></li>
                        
                          <li><a title="借GitHub/云生成一个小型静态blog？" href="16611834292541.html">借GitHub/云生成一个小型静态blog？</a></li>
                        
                          <li><a title="我也不知道该写点什么" href="16565998692545.html">我也不知道该写点什么</a></li>
                        

                    
                      <li class="side-title"><span>program</span></li>
                        
                          <li><a title="Electron" href="16558224788573.html">Electron</a></li>
                        
                          <li><a title="Java" href="16512220640052.html">Java</a></li>
                        
                          <li><a title="algorithm" href="16464916020294.html">algorithm</a></li>
                        
                          <li><a title="nodejs" href="16445062695977.html">nodejs</a></li>
                        
                          <li><a title="MySQL" href="16417742815461.html">MySQL</a></li>
                        

                    
                      <li class="side-title"><span>network</span></li>
                        
                          <li><a title="HTTPS" href="16445059759610.html">HTTPS</a></li>
                        
                          <li><a title="HTTP" href="16434685816689.html">HTTP</a></li>
                        
                          <li><a title="应用层" href="16429345213468.html">应用层</a></li>
                        
                          <li><a title="传输层" href="16427785444311.html">传输层</a></li>
                        
                          <li><a title="网络层" href="16406143899741.html">网络层</a></li>
                        
                          <li><a title="数据链路层" href="16393212106516.html">数据链路层</a></li>
                        
                          <li><a title="计算机网络" href="16376768137573.html">计算机网络</a></li>
                        

                    
                      <li class="side-title"><span>JS Pro</span></li>
                        
                          <li><a title="⭐️期约与异步函数" href="16402238078899.html">⭐️期约与异步函数</a></li>
                        
                          <li><a title="函数" href="16393591389076.html">函数</a></li>
                        
                          <li><a title="代理与反射" href="16393584526044.html">代理与反射</a></li>
                        
                          <li><a title="⭐️对象,类与面对对象编程" href="16382370352660.html">⭐️对象,类与面对对象编程</a></li>
                        
                          <li><a title="迭代器与生成器" href="16382368417536.html">迭代器与生成器</a></li>
                        
                          <li><a title="集合应用类型" href="16344851791468.html">集合应用类型</a></li>
                        
                          <li><a title="红宝书" href="16324468661377.html">红宝书</a></li>
                        

                    
                      <li class="side-title"><span>Vue</span></li>
                        
                          <li><a title="Principle" href="16417423637971.html">Principle</a></li>
                        
                          <li><a title="Webpack" href="16401645826486.html">Webpack</a></li>
                        
                          <li><a title="vue cli" href="16401638058072.html">vue cli</a></li>
                        
                          <li><a title="vue router" href="16400576847027.html">vue router</a></li>
                        

                    
                      <li class="side-title"><span>React</span></li>
                        
                          <li><a title="TypeScript" href="16585850262934.html">TypeScript</a></li>
                        
                          <li><a title="Trick" href="16582426754547.html">Trick</a></li>
                        
                          <li><a title="React & Vue.js" href="16576366900990.html">React & Vue.js</a></li>
                        
                          <li><a title="begin" href="16559083526575.html">begin</a></li>
                        

                    
                      <li class="side-title"><span>Trick</span></li>
                        
                          <li><a title="some tips" href="16559957290588.html">some tips</a></li>
                        
                          <li><a title="paper" href="16515899913549.html">paper</a></li>
                        
                          <li><a title="我也不知道这一页该叫什么🧐" href="16347422574488.html">我也不知道这一页该叫什么🧐</a></li>
                        

                    
                      <li class="side-title"><span>work</span></li>
                        
                          <li><a title="笔试题" href="16512067476067.html">笔试题</a></li>
                        
                          <li><a title="practice" href="16481332591584.html">practice</a></li>
                        
                          <li><a title="JS每日一题" href="16471841635278.html">JS每日一题</a></li>
                        
                          <li><a title="🤯面试记录2" href="16462320184228.html">🤯面试记录2</a></li>
                        
                          <li><a title="notes" href="16460176233572.html">notes</a></li>
                        
                          <li><a title="eslint - vue" href="16378340644786.html">eslint - vue</a></li>
                        
                          <li><a title="烦😶‍🌫️" href="16325412705266.html">烦😶‍🌫️</a></li>
                        

                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 <div class="markdown-body">
<h1>网络层</h1>

<h2><a id="%E4%B8%80%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>一 基本概念</h2>
<blockquote>
<p>主要任务是把<strong>分组</strong>从源端传到目的端，为分组交换网上的不同主机提供通信服务。</p>
</blockquote>
<p>网络层传输单位是<strong>数据报</strong></p>
<p>功能：</p>
<ol>
<li>路由选择与分组转发 --- 最佳路径</li>
<li>异构网络互联</li>
<li>拥塞控制 --- 全局性</li>
</ol>
<h2><a id="%E4%BA%8C%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>二 数据交换方式</h2>
<h3><a id="2-1%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.1 电路交换</h3>
<blockquote>
<p>建立连接 =&gt; 通信 =&gt; 释放连接</p>
</blockquote>
<p>e.g.：电话网络</p>
<p>特点：独占资源</p>
<p>优点：</p>
<ol>
<li>通信时延小</li>
<li>有序传输</li>
<li>没有冲突</li>
<li>实时性强</li>
</ol>
<p>缺点：</p>
<ol>
<li>建立连接时间长</li>
<li>线路独占，使用效率低</li>
<li>灵活性差</li>
<li>无差错控制能力</li>
</ol>
<h3><a id="2-2%E6%8A%A5%E6%96%87%E4%BA%A4%E6%8D%A2" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.2 报文交换</h3>
<blockquote>
<p>报文：源应用发送的信息<strong>整体</strong>。</p>
</blockquote>
<p>特点：存储转发</p>
<p>优点：</p>
<ol>
<li>无需建立连接</li>
<li>存储转发，动态分配线路</li>
<li>线路可靠性较高</li>
<li>线路利用率较高</li>
<li>多目标服务</li>
</ol>
<p>缺点：</p>
<ol>
<li>有存储转发时延</li>
<li>报文大小不定，需要网络节点有较大缓存空间</li>
</ol>
<h3><a id="2-3%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.3 分组交换</h3>
<blockquote>
<p>分组：把大的数据块<strong>分割</strong>成小的数据块。</p>
</blockquote>
<p>特点：分组存储转发</p>
<p>优点：相对于报文交换，存储管理更容易 --- 对缓存要求更小</p>
<p>缺点：</p>
<ol>
<li>有存储转发时延 --- 会比报文交换小</li>
<li>需要传输额外的信息量</li>
<li>乱序到目的主机时，需对主机排序重组</li>
</ol>
<p>tip：<code>1字节（Byte）=8比特（bit）</code></p>
<h4><a id="2-3-1%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%96%B9%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.3.1 数据报方式</h4>
<blockquote>
<p>数据报方式为网络层提供<strong>无连接服务</strong>。 --- 因特网</p>
</blockquote>
<p><code>无连接服务</code>：不事先为分组的传输确定传输路径，每个分组独立确定传输路径，不同分组传输路径可能不同。</p>
<p>特点：</p>
<ol>
<li>无连接</li>
<li>每个分组携带源和目的地址</li>
<li>路由器根据分组的目的地址转发分组：<br />
基于路由协议/算法构建转发表 =&gt; 检索转发表 =&gt; 每个分组独立选路</li>
</ol>
<h4><a id="2-3-2%E8%99%9A%E7%94%B5%E8%B7%AF%E6%96%B9%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.3.2 虚电路方式</h4>
<blockquote>
<p>虚电路方式为网络层提供<strong>连接服务</strong>。 --- 数据报方式和电路交换方式的结合</p>
</blockquote>
<p><code>连接服务</code>：首先为分组的传输确定传输路径（建立连接），然后沿改路径（连接）传输系列分组，系列分组传输路径相同，传输结束后拆除连接。</p>
<p>虚电路：一条源主机到目的主机类似于电路的路径（逻辑连接），路径上所有结点都要维持这条虚电路的建立，都维持一张虚电路表，每一项纪录了一个打开的虚电路信息。</p>
<p>建立连接（虚电路建立） =&gt; 数据传输 =&gt; 释放连接（虚电路释放）</p>
<h4><a id="2-3-3%E6%95%B0%E6%8D%AE%E6%8A%A5%E8%99%9A%E7%94%B5%E8%B7%AF%E5%AF%B9%E6%AF%94" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.3.3 数据报&amp;虚电路 对比</h4>
<p><img src="media/16406143899741/16407862413167.jpg" alt="compare" /></p>
<h3><a id="2-4%E5%AF%B9%E6%AF%94" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.4 对比</h3>
<p><img src="media/16406143899741/16407029014872.jpg" alt="总结" /></p>
<h2><a id="%E4%B8%89%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95%E5%8F%8A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E6%A6%82%E8%BF%B0" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>三 路由算法及路由协议概述</h2>
<p>详见 八、九、十</p>
<h3><a id="3-1%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.1 路由算法</h3>
<blockquote>
<p>最佳路由：“最佳”只能是相对于某一种特定要求下得出的较为合理的选择而已。</p>
</blockquote>
<h4><a id="3-1-1%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.1.1 静态路由算法</h4>
<blockquote>
<p>管理员手工配置路由信息。</p>
</blockquote>
<p>缺点：路由更新慢，不适用大型网络。</p>
<h4><a id="3-1-2%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.1.2 动态路由算法</h4>
<blockquote>
<p>路由器间彼此交换信息，按照路由算法优化出路由表项。</p>
</blockquote>
<p>缺点：算法复杂，增加网络负担</p>
<h5><a id="%E5%85%A8%E5%B1%80%E6%80%A7%EF%BC%9A%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95ospf" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>全局性：链路状态路由算法 <code>OSPF</code></h5>
<blockquote>
<p>所有路由器掌握完整的网络拓扑和链路费用信息。 --- 适用大型网络</p>
</blockquote>
<h5><a id="%E5%88%86%E6%95%A3%E6%80%A7%EF%BC%9A%E8%B7%9D%E7%A6%BB%E5%90%91%E9%87%8F%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95rip" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>分散性：距离向量路由算法 <code>RIP</code></h5>
<blockquote>
<p>路由器只掌握物理相连的邻居及链路费用。 --- 只适用小互联网</p>
</blockquote>
<h3><a id="3-2%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.2 路由协议</h3>
<p><code>分层次</code></p>
<blockquote>
<p><strong>自治系统AS</strong>：在单一的技术管理下的一组路由器，而这些路由器使用一种<strong>AS内部</strong>的路由选择协议和共同的度量以确定分组在该AS内的路由，同时还使用一种<strong>AS之间</strong>的路由协议以确定在AS之间的路由。</p>
</blockquote>
<p>一个AS内的所有网络都属于一个行政单位来管辖，一个自治系统的所有路由器在本自治系统内都必须连通。</p>
<h4><a id="3-2-1%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE-igp" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.2.1 内部网关协议 IGP</h4>
<p>一个<strong>AS内</strong>使用的 --- RIP、OSPF</p>
<h4><a id="3-2-2%E5%A4%96%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE-egp" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.2.2 外部网关协议 EGP</h4>
<p><strong>AS之间</strong>使用的 --- BGP</p>
<hr />
<h2><a id="%E5%9B%9Bip%E6%95%B0%E6%8D%AE%E6%8A%A5" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>四 IP数据报</h2>
<p><img src="media/16406143899741/16412129771863.jpg" alt="TCP/IP协议栈" /></p>
<h3><a id="4-1-ip%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.1 IP数据报格式</h3>
<p><img src="media/16406143899741/16412134427117.jpg" alt="preview" /><br />
<img src="media/16406143899741/16412149786986.jpg" alt="detail" /></p>
<h3><a id="4-2%E6%9C%80%E5%A4%A7%E4%BC%A0%E8%BE%93%E5%8D%95%E5%85%83-mtu" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.2 最大传输单元MTU</h3>
<blockquote>
<p>链路层数据帧可封装数据有上限。以太网的MTU是<code>1500字节</code> --- 网络层数据分片</p>
</blockquote>
<p>首部含义：</p>
<ol>
<li>标识：同一数据报的分片使用同一标识。</li>
<li>标志：只有2位有意义<code>×__</code>
<ul>
<li>中间位DF (Don't Fragment)<br />
DF=1，禁止分片<br />
DF=0，允许分片</li>
<li>最低位MF ( More Fragment) <code>DF=1时才有效</code><br />
MF=1，后面“还有分片”<br />
MF=0，代表最后一片/没分片</li>
</ul>
</li>
<li>片偏移：指出较长分组分片后，某片在原分组中的相对位置。以<strong>8B</strong>为单位。</li>
</ol>
<p>除了最后一个分片，每个分片长度一定是<strong>8B的整数倍</strong>。</p>
<h3><a id="4-3-ipv4%E5%9C%B0%E5%9D%80" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.3 IPV4地址</h3>
<p><img src="media/16406143899741/16412176940275.jpg" alt="分类" /></p>
<p><img src="media/16406143899741/16412177234944.jpg" alt="特殊的IP地址" /></p>
<p><img src="media/16406143899741/16412180575030.jpg" alt="私有/专用IP地址" /></p>
<p><img src="media/16406143899741/16412182453395.jpg" alt="数量" /></p>
<h4><a id="4-3-1%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2-nat" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.3.1 网络地址转换 NAT</h4>
<p>NAT【Network Address Translation】</p>
<blockquote>
<p>在<strong>专用网</strong>连接到因特网的路由器上安装NAT软件，安装了NAT软件的路由器叫NAT路由器，它至少有一个有效的<strong>外部全球IP地址</strong>。</p>
</blockquote>
<h4><a id="4-3-2%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.3.2 子网划分</h4>
<p><img src="media/16406143899741/16420810711556.jpg" alt="子网划分" /></p>
<ul>
<li>子网掩码 --- 区分子网号和主机号的划分点</li>
</ul>
<h4><a id="4-3-3%E6%97%A0%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80-cidr" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.3.3 无分类编址 CIDR</h4>
<p>无分类域间路由选择【Classless Inter-Domain Routing】</p>
<ol>
<li>消除了传统的A类、B类、C类地址以及划分子网的概念。<code>网络前缀 + 主机号</code></li>
<li>融合子网地址与子网掩码，方便子网划分。<code>CIDR地址块</code> --- 网络前缀都相同</li>
</ol>
<p><img src="media/16406143899741/16420829126961.jpg" alt="CIDR" /></p>
<h3><a id="4-4%E6%9E%84%E6%88%90%E8%B6%85%E7%BD%91" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.4 构成超网</h3>
<blockquote>
<p>将多个子网聚合成一个较大的子网，叫做构成超网/路由聚合。<br />
方法：将网络前缀缩短。</p>
</blockquote>
<p>最长前缀匹配：使用CIDR时，查找路由表可能得到的几个匹配结果，应该选择具有<strong>最长</strong>网络前缀的路由。前缀越长，地址块越小，路由越具体。</p>
<h2><a id="%E4%BA%94arp%E5%8D%8F%E8%AE%AE" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>五 ARP协议</h2>
<p>数据链路层 -&gt; 网络层</p>
<p>地址解析协议【Address Resolution Protocol】</p>
<blockquote>
<p>完成主机或路由器IP地址到<strong>MAC地址</strong>的映射。</p>
</blockquote>
<h3><a id="5-1%E5%8F%91%E9%80%81%E6%95%B0%E6%8D%AE%E7%9A%84%E8%BF%87%E7%A8%8B" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>5.1 发送数据的过程</h3>
<p>局域网内传输：1 -&gt; 3<br />
<img src="media/16406143899741/16420843438446.jpg" alt="内" /></p>
<ul>
<li>ARP协议<strong>自动进行</strong></li>
</ul>
<h2><a id="%E4%BA%94dhcp%E5%8D%8F%E8%AE%AE" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>.五 DHCP协议</h2>
<p>动态IP</p>
<p>动态主机设置协议【Dynamic Host Configuration Protocol】 --- 应用层协议</p>
<blockquote>
<p>是<strong>应用层</strong>协议，使用<strong>客户/服务器</strong>方式，客户端和服务器通过<strong>广播</strong>方式进行交互，基于<strong>UDP</strong>。</p>
</blockquote>
<p>DHCP提供<strong>即插即用</strong>联网的机制，主机可以从服务器动态获取IP地址、子网掩码、默认网关、DNS服务器名称与IP地址，允许<strong>地址复用</strong>，支持<strong>移动用户加入网络</strong>，支持<strong>在用地址续租</strong>。</p>
<ol>
<li>主机广播DHCP<strong>发现</strong>报文</li>
<li>DHCP服务器广播DHCP<strong>提供</strong>报文</li>
<li>主机广播DHCP<strong>请求</strong>报文</li>
<li>DHCP服务器广播DHCP<strong>确认</strong>报文</li>
</ol>
<h2><a id="%E5%85%ADicmp%E5%8D%8F%E8%AE%AE" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>六 ICMP协议</h2>
<p>网络层 -&gt; 传输层</p>
<p>互联网控制消息协议【Internet Control Message Protocol】</p>
<blockquote>
<p>用于网际协议中发送控制消息，提供可能发生在通信环境中的各种问题反馈。</p>
</blockquote>
<p><img src="media/16406143899741/16424292389566.jpg" alt="ICMP" /></p>
<h3><a id="6-1%E5%B7%AE%E9%94%99%E6%8A%A5%E6%96%87" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>6.1 差错报文</h3>
<blockquote>
<p>有差错数据直接丢弃 --- 但需返回指定信息（差错报文）</p>
</blockquote>
<p>差错报文类型：</p>
<ol>
<li>终点不可达</li>
<li>源点抑制 --- 已不使用</li>
<li>时间超过</li>
<li>参数问题</li>
<li>改变路由（重定向）</li>
</ol>
<p>差错报文数据字段：有差错的IP数据报 =&gt; ICMP报文<br />
<img src="media/16406143899741/16424296491092.jpg" alt="数据报" /></p>
<p>不发送ICMP差错报文的情况：<br />
1.对<strong>ICMP差错报告报文</strong>不再发送ICMP差错报告报文。<br />
2.对第一个分片的数据报片的所有<strong>后续数据报片</strong>都不发送ICMP差错报告报文。<br />
3.对具有<strong>组播地址</strong>的数据报都不发送ICMP差错报告报文。<br />
4.对具有<strong>特殊地址</strong>（如127.0.0.0或0.0.0.0）的数据报不发送ICMP差错报告报文。</p>
<h3><a id="6-2%E8%AF%A2%E9%97%AE%E6%8A%A5%E6%96%87" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>6.2 询问报文</h3>
<p>询问报文类型：<br />
1.回送请求和回答报文<br />
2.时间戳请求和回答报文<br />
3.掩码地址请求和回答报文 --- 已不使用<br />
4.路由器询问和通告报文 --- 已不使用</p>
<h3><a id="6-3-icmp%E5%BA%94%E7%94%A8" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>6.3 ICMP应用</h3>
<ol>
<li>PING：测试两个主机之间的连通性，使用了<strong>ICMP回送请求和回答报文</strong>。</li>
<li>Traceroute：跟踪一个分组从源点到终点的路径，使用了<strong>ICMP时间超过差错报告报文</strong>。</li>
</ol>
<h2><a id="%E4%B8%83ipv6" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>七 IPV6</h2>
<p>地址分配<strong>128位</strong>（16B）</p>
<h3><a id="7-1%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>7.1 数据报格式</h3>
<p>固定<strong>40B</strong>基本首部</p>
<p><img src="media/16406143899741/16424315179369.jpg" alt="IPV6" /></p>
<h3><a id="7-2%E5%8C%BA%E5%88%AB" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>7.2 区别</h3>
<ol>
<li>IPV6将地址从32位（4B）扩大到<strong>128位（16B）</strong>，更大的地址空间。</li>
<li>IPV6将1Pv4的<strong>校验和字段彻底移除</strong>，以减少每跳的处理时间。</li>
<li>IPV6将1Pv4的可选字段移出首部，变成了<strong>扩展首部</strong>，成为灵活的首部格式，路由器通常不对扩展首部进行检查，大大提高了路由器的处理效率。</li>
<li>IPV6支持<strong>即插即用</strong>（即自动配置），不需要DHCP协议。</li>
<li>IPV6首部长度必须是<strong>8B的整数倍</strong>，1Pv4首部是4B的整数倍。</li>
<li>IPv6<strong>只能在主机处分片</strong>，1Pv4可以在路由器和主机处分片。</li>
</ol>
<h3><a id="7-3%E5%9C%B0%E5%9D%80%E8%A1%A8%E7%A4%BA%E5%BD%A2%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>7.3 地址表示形式</h3>
<p><img src="media/16406143899741/16425150207470.jpg" alt="表示" /></p>
<h3><a id="7-4-ipv6%E5%90%91ipv4%E8%BF%87%E6%B8%A1%E7%9A%84%E7%AD%96%E7%95%A5" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>7.4 IPv6向IPv4过渡的策略</h3>
<ol>
<li>双栈协议</li>
<li>隧道技术</li>
</ol>
<hr />
<h2><a id="%E5%85%ABrip%E5%8D%8F%E8%AE%AE" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>八 RIP协议</h2>
<p>路由信息协议【Routing Information Protocol】 --- <strong>应用层</strong>协议</p>
<blockquote>
<p>RIP是一种分布式的基于<strong>距离向量</strong>的路由选择协议，是因特网的协议标准。<code>简单</code></p>
</blockquote>
<p>RIP允许一条路由最多只能包含<code>15个</code>路由器，因此距离为<strong>16表示网络不可达</strong>。<br />
RIP协议只适用于小互联网。</p>
<h3><a id="8-1%E4%BF%A1%E6%81%AF%E4%BA%A4%E6%8D%A2%E7%89%B9%E7%82%B9" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>8.1 信息交换特点</h3>
<ol>
<li>仅和<strong>相邻路由器</strong>交换信息</li>
<li>路由器交换的信息是<strong>自己的路由表</strong>。</li>
<li><strong>每30s</strong>交换一次路由信息。</li>
<li>使用<strong>距离向量算法</strong>更新路由表 --- 详Google</li>
</ol>
<h3><a id="8-2%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>8.2 报文格式</h3>
<p><img src="media/16406143899741/16426025358111.jpg" alt="报文" /></p>
<ul>
<li>应用层协议，使用<strong>UDP</strong>传输数据</li>
</ul>
<h3><a id="8-3%E7%89%B9%E7%82%B9" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>8.3 特点</h3>
<p>当网络<strong>出现故障</strong>时，要经过较长的时间（例如数分钟）才能将信息传送到所有的路由器，“慢收敛”。</p>
<h2><a id="%E4%B9%9Dospf%E5%8D%8F%E8%AE%AE" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>九 OSPF协议</h2>
<p>开放式最短路径优先【Open Shortest Path First】 --- <strong>网络层</strong>（/传输层）协议</p>
<blockquote>
<p>“开放”标明OSPF协议不是受某一家厂商控制，而是<strong>公开发表</strong>的；“最短路径优先”是因为使用了Dijkstra提出的<strong>最短路径算法<code>SPF</code></strong></p>
</blockquote>
<p>特征：使用分布式的<strong>链路状态协议</strong>。</p>
<h3><a id="9-1%E4%BF%A1%E6%81%AF%E4%BA%A4%E6%8D%A2%E7%89%B9%E7%82%B9" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>9.1 信息交换特点</h3>
<ol>
<li>使用洪泛法向自治系统内<strong>所有路由器</strong>发送信息。（广播）</li>
<li>发送与本路由器<strong>相邻的所有路由器的链路状态</strong></li>
<li>只有当<strong>链路状态发生变化时</strong>，才再次发送信息。</li>
<li>使用<strong>链路状态路由算法</strong>更新链路状态。</li>
</ol>
<p>最后，所有路由器都能建立一个<strong>链路状态数据库</strong>，即<strong>全网拓扑图</strong>。</p>
<h3><a id="9-2%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>9.2 链路状态路由算法</h3>
<p>初始化：</p>
<ol>
<li>每个路由器发现它的邻居结点【HELLO问候分组】，并了解邻居节点的网络地址。</li>
<li>设置到它的每个邻居的成本度量metric。</li>
<li>构造【DD数据库描述分组】，向邻站给出自己的链路状态数据库中的所有链路状态项目的摘要信息。</li>
<li>如果DD分组中的摘要自己都有，则邻站不做处理；如果有没有的或者是更新的，则发送【LSR链路状态请求分组】请求自己没有的和比自己更新的信息。</li>
<li>收到邻站的LSR分组后，发送【LSU链路状态更新分组】进行更新。</li>
<li>更新完毕后，邻站返回一个【LSAck链路状态确认分组】进行确认。</li>
</ol>
<ul>
<li>只要一个路由器的链路状态发生变化：</li>
</ul>
<ol start="5">
<li>泛洪发送【LSU链路状态更新分组】进行更新。</li>
<li>更新完毕后，其他站返回一个【LSAck链路状态确认分组】进行确认。</li>
<li>使用Dijkstra根据自己的链路状态数据库构造到其他节点间的最短路径。</li>
</ol>
<h3><a id="9-3-ospf%E5%8C%BA%E5%9F%9F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>9.3 OSPF区域</h3>
<p>为了使 OSPF 能够用于规模很大的网络，OSPF将一个自治系统再划分为若干个更小的范围，叫做区域。<br />
每一个区域都有一个32 位的区域标识符（用点分十进制表示）<br />
<img src="media/16406143899741/16426044652660.jpg" alt="区域" /></p>
<h3><a id="9-4%E5%88%86%E7%BB%84%E6%A0%BC%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>9.4 分组格式</h3>
<p><img src="media/16406143899741/16426043353533.jpg" alt="分组" /></p>
<ul>
<li>OSPF直接使用<strong>IP数据包</strong>传送。</li>
</ul>
<h3><a id="9-5%E7%89%B9%E7%82%B9" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>9.5 特点</h3>
<ol>
<li>每隔<strong>30min</strong>，要刷新一次数据库中的链路状态。</li>
<li>由于一个路由器的链路状态只涉及到与相邻路由器的连通状态，因而与整个互联网的规模并无直接关系。因此当<strong>互联网规模很大</strong>时，OSPF 协议要比距离向量协议 RIP 好得多。</li>
<li>OSPF不存在坏消息传的慢的问题，它的<strong>收敛速度很快</strong>。</li>
</ol>
<h2><a id="%E5%8D%81bgp%E5%8D%8F%E8%AE%AE" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>十 BGP协议</h2>
<p>边界网关协议【Border Gateway Protocol】 --- <strong>应用层</strong>协议</p>
<h3><a id="10-1%E4%BF%A1%E6%81%AF%E4%BA%A4%E6%8D%A2%E7%89%B9%E7%82%B9" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>10.1 信息交换特点</h3>
<ol>
<li>与<strong>其他AS</strong>的领站BGP发言人交换信息。</li>
<li>交换网络可达性的信息，即要<strong>到达某个网络所要经过的一系列AS</strong>。</li>
<li>发生变化时更新有变化的部分。</li>
</ol>
<h3><a id="10-2%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>10.2 报文格式</h3>
<p>一个 BGP 发言人与其他自治系统中的 BGP 发言人要交换路由信息，就要<strong>先建立TCP连接</strong>，即通过TCP传送，然后在此连接上交换 BGP 报文以建立 BGP 会话(session)，利用 BGP 会话交换路由信息。<br />
<img src="media/16406143899741/16426875009032.jpg" alt="报文" /></p>
<ul>
<li>应用层协议，借助<strong>TCP</strong>传送。</li>
</ul>
<h3><a id="10-3%E7%89%B9%E7%82%B9" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>10.3 特点</h3>
<ol>
<li>支持<code>CIDR</code></li>
<li>在BGP刚刚运行时，BGP 的邻站是交换整个的BGP路由表。但以后只需要在发生变化时更新有变化的部分。这样做对节省网络带宽和减少路由器的处理开销都有好处。</li>
</ol>
<h3><a id="10-4-bgp-4%E7%9A%84%E5%9B%9B%E7%A7%8D%E6%8A%A5%E6%96%87" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>10.4 BGP-4的四种报文</h3>
<ol>
<li><strong>0PEN（打开）报文</strong>：用来与相邻的另一个BGP发言人建立关系，并认证发送方。</li>
<li><strong>UPDATE（更新）报文</strong>：通告新路径或撤销原路径。</li>
<li><strong>KEEPALIVE（保活）报文</strong>：在无UPDATE时，周期性证实邻站的连通性；也作为OPEN的确认。</li>
<li><strong>NOTIFICATION（通知）报文</strong>：报告先前报文的差错；也被用于关闭连接。</li>
</ol>
<h3><a id="%E4%B8%89%E7%A7%8D%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%AF%B9%E6%AF%94" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>三种路由协议的对比</h3>
<p><img src="media/16406143899741/16426881649171.jpg" alt="对比" /></p>
<hr />
<h2><a id="%E5%8D%81%E4%B8%80ip%E7%BB%84%E6%92%AD" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>十一 IP组播</h2>
<p>IP数据包的三种传输方式：</p>
<ol>
<li>单播：点对点</li>
<li>广播：点对多点（全部）</li>
<li>组播（多播）：点对多点（部分）</li>
</ol>
<h3><a id="11-1-ip%E7%BB%84%E6%92%AD%E5%9C%B0%E5%9D%80" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>11.1 IP组播地址</h3>
<p>IP组播地址让源设备能够将分组发送给一组设备。属于多播组的设备将被分配一<strong>个组播组IP地址</strong>（一群共同需求主机的相同标识）。</p>
<blockquote>
<p>组播地址范围为<strong>224.0.0.0～239.255.255.255(D类地址）</strong>，一个D类地址表示一个组播组。<br />
只能用作分组的目标地址。源地址总是为单播地址。</p>
</blockquote>
<p>1.组播数据报也是“尽最大努力交付”，不提供可靠交付，应用于<strong>UDP</strong>。<br />
2.对组播数据报<strong>不产生ICMP差错报文</strong>。<br />
3.并非所有D类地址都可以作为组播地址。</p>
<h3><a id="11-2%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%92%AD" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>11.2 硬件组播</h3>
<p>同单播地址一样，组播IP地址也需要相应的组播MAC地址在本地网络中实际传送帧。组播MAC地址以十六进制值<code>01-00-5E打头</code>，余下的6个十六进制位是根据IP组播组地址的最后23位转换得到的。</p>
<p><img src="media/16406143899741/16426896169199.jpg" alt="映射" /></p>
<ul>
<li>收到多播数据报的主机，还要在IP层利用软件进行过滤，把不是本主机要接收的数据报丢弃。 --- 解决D类IP地址前5位未映射的问题</li>
</ul>
<h3><a id="11-3%E5%9B%A0%E7%89%B9%E7%BD%91%E8%8C%83%E5%9B%B4%E5%86%85%E7%BB%84%E6%92%AD" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>11.3 因特网范围内组播</h3>
<ol>
<li>IGMP协议：路由器内</li>
<li>组播路由选择协议：路由器之间</li>
</ol>
<h4><a id="11-3-1-igmp%E5%8D%8F%E8%AE%AE" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>11.3.1 IGMP协议</h4>
<p>网络层 -&gt; 传输层</p>
<p>互联网组管理协议【Internet Group Management Protocol】</p>
<blockquote>
<p>让路由器知道<strong>本局域网</strong>上是否有主机（的进程）参加或退出了某个组播组。</p>
</blockquote>
<p>IGMP工作的两个阶段：<br />
ROUND 1:<br />
某主机要加入组播组时，该主机向组播组的组播地址发送一个IGMP报文，声明自己要称为该组的成员。<br />
本地组播路由器收到IGMP报文后，要利用组播路由选择协议把这组成员关系发给因特网上的其他组播路由器。<br />
ROUND 2:<br />
本地组播路由器周期性探询本地局域网上的主机，以便知道这些主机是否还是组播组的成员。<br />
只要有一个主机对某个组响应，那么组播路由器就认为这个组是活跃的：如果经过几次探询后没有一个主机响应，组播路由器就认为本网络上的没有此组播组的主机，因此就不再把这组的成员关系发给其他的组播路由器。</p>
<ul>
<li>组播路由器知道的成员关系只是所连接的局域网中<strong>有无</strong>组播组的成员。</li>
</ul>
<h4><a id="11-3-2%E7%BB%84%E6%92%AD%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>11.3.2 组播路由选择协议</h4>
<blockquote>
<p>目的时找出以源主机为根节点的<strong>组播转发树</strong>。</p>
</blockquote>
<p>常用算法：</p>
<ol>
<li>基于链路状态的路由选择</li>
<li>基于距离-向量的路由选择</li>
<li>协议无关的组播（稀疏/密集）</li>
</ol>
<h2><a id="%E5%8D%81%E4%BA%8C%E7%A7%BB%E5%8A%A8ip" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>十二 移动IP</h2>
<p>代理Proxy？</p>
<blockquote>
<p>移动IP技术是移动节点(计算机/服务器等)以<strong>固定的网络IP地址</strong>，实现跨越不同网段的漫游功能，并保证了基于网络IP的网络权限在漫游过程中不发生任何改变。</p>
</blockquote>
<p>移动结点： 具有永久IP地址的移动设备。<br />
归属代理（本地代理）：一个移动结点拥有的就“居所”称为<strong>归属网络</strong>，在归属网络中代表移动节点执行移动管理功能的实体叫做归属代理。<br />
外部代理（外地代理）：在<strong>外部网络</strong>中帮助移动节点完成移动管理功能的实体称为外部代理。<br />
永久地址（归属地址/主地址）： 移动站点在归属网络中的原始地址。 --- 固定IP地址<br />
转交地址（辅地址）：移动站点在外部网络使用的临时地址。</p>
<h3><a id="%E9%80%9A%E4%BF%A1%E8%BF%87%E7%A8%8B%EF%BC%9A" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>通信过程：</h3>
<p><img src="media/16406143899741/16427771629941.jpg" alt="过程" /></p>
<ol>
<li>A刚进入外部网络：
<ol>
<li>在外部代理登记获得一个转交地址，离开时注销。</li>
<li>外地代理向本地代理登记转交地址。</li>
</ol>
</li>
<li>B给A发送数据报：
<ol>
<li>本地代理截获数据报。</li>
<li>本地代理再封装数据报，新的数据报目的地址是转交地址，发给外部代理（隧道）。</li>
<li>外部代理拆封数据报并发给A。</li>
</ol>
</li>
<li>A给B发送数据报：<br />
A用自己的主地址作为数据报源地址，用B的1P地址作为数据报的目的地址。</li>
<li>A移动到了下一个网络：
<ol>
<li>在新外部代理登记注册一个转交地址。</li>
<li>新外部代理给本地代理发送新的转交地址（覆盖旧的）。</li>
<li>通信</li>
</ol>
</li>
<li>A回到了归属网络：
<ol>
<li>A向本地代理注销转交地址。</li>
<li>按原始方式通信。</li>
</ol>
</li>
</ol>
<h2><a id="%E5%8D%81%E4%B8%89%E7%BD%91%E7%BB%9C%E5%B1%82%E8%AE%BE%E5%A4%87" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>十三 网络层设备</h2>
<h3><a id="13-1%E8%B7%AF%E7%94%B1%E5%99%A8" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>13.1 路由器</h3>
<blockquote>
<p>路由器是一种具有多个输入端口和多个输出端口的专用计算机，其任务是<strong>转发分组</strong>。</p>
</blockquote>
<p><img src="media/16406143899741/16427777206119.jpg" alt="router" /></p>
<ol>
<li>
<p><strong>输入</strong>端口对线路上收到的分组的处理:<br />
<img src="media/16406143899741/16427778570655.jpg" alt="in" /></p>
<ul>
<li>输入端口中的<strong>查找和转发</strong>功能在路由器的交换功能中是最重要的。</li>
</ul>
</li>
<li>
<p><strong>输出</strong>端口将交换结构传送来的分组发送到线路:<br />
<img src="media/16406143899741/16427780011614.jpg" alt="out" /></p>
<ul>
<li>若路由器处理分组的速率赶不上分组进入队列的速率，则队列的存储空间最终必定减少到零，这就使后面再进入队列的分组由于没有存储空间而只能被<strong>丢弃</strong>。</li>
</ul>
</li>
</ol>
<ul>
<li>路由器中的输入或输出<strong>队列产生溢出</strong>是造成分组丢失的重要原因。</li>
</ul>
<h3><a id="13-2%E4%B8%89%E5%B1%82%E8%AE%BE%E5%A4%87%E7%9A%84%E5%8C%BA%E5%88%AB" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>13.2 三层设备的区别</h3>
<p><strong>路由器</strong>： 可以互联两个不同<strong>网络层</strong>协议的网段。<br />
<strong>网桥</strong>： 可以互联两个<strong>物理层</strong>和<strong>链路层</strong>不同的网段。<br />
<strong>集线器</strong>： <u>不能</u>互联两个<strong>物理层</strong>不同的网段。</p>
<p><img src="media/16406143899741/16427782799862.jpg" alt="对比" /></p>
<h3><a id="13-3%E8%B7%AF%E7%94%B1%E8%A1%A8%E4%B8%8E%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>13.3 路由表与路由转发</h3>
<p>路由表 根据<strong>路由选择算法</strong>得出的，主要用途是路由选择，总用软件来实现。</p>
<p>转发表 由<strong>路由表</strong>得来，可以用软件实现，也可以用特殊的硬件来实现。转发表必须包含完成转发功能所必需的信息，在转发表的每一行必须包含从要到达的目的网络到输出端口和某些MAc地址信息的映射。</p>
<p><img src="media/16406143899741/16427784684639.jpg" alt="end" /></p>


</div>

<br /><br />
<hr />

<div class="row clearfix">
  <div class="large-6 columns">
	<div class="text-left" style="padding:15px 0px;">
		
	        <a href="16417423637971.html"  title="Previous Post: Principle">&laquo; Principle</a>
	    
	</div>
  </div>
  <div class="large-6 columns">
	<div class="text-right" style="padding:15px 0px;">
		
	        <a href="16402238078899.html" 
	        title="Next Post: ⭐️期约与异步函数">⭐️期约与异步函数 &raquo;</a>
	    
	</div>
  </div>
</div>

<div class="row">
<div style="padding:0px 0.93em;" class="share-comments">

</div>
</div>
<script type="text/javascript">
	$(function(){
		var currentURL = '16406143899741.html';
		$('#side-nav a').each(function(){
			if($(this).attr('href') == currentURL){
				$(this).parent().addClass('active');
			}
		});
	});
</script>  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    



  














<style type="text/css">
figure{margin: 0.4em 0;padding: 0;}
  figcaption{text-align:center;}

/* PrismJS 1.14.0
 http://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript */
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
    color: black;
    background: none;
    text-shadow: 0 1px white;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
    
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
    
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
    text-shadow: none;
    background:#b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
    text-shadow: none;
    background: #b3d4fc;
}

@media print {
    code[class*="language-"],
    pre[class*="language-"] {
        text-shadow: none;
    }
}

/* Code blocks */
pre[class*="language-"] {
    padding: 1em;
    margin: .5em 0;
    overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
    background: #F7F7F7;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
    padding: .1em;
    border-radius: .3em;
    white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
    color: slategray;
}

.token.punctuation {
    color: #999;
}

.namespace {
    opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
    color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
    color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
    color: #9a6e3a;
    background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
    color: #07a;
}

.token.function,
.token.class-name {
    color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
    color: #e90;
}

.token.important,
.token.bold {
    font-weight: bold;
}
.token.italic {
    font-style: italic;
}

.token.entity {
    cursor: help;
}


pre[class*="language-"].line-numbers {
    position: relative;
    padding-left: 3.8em;
    counter-reset: linenumber;
}

pre[class*="language-"].line-numbers > code {
    position: relative;
    white-space: inherit;
}

.line-numbers .line-numbers-rows {
    position: absolute;
    pointer-events: none;
    top: 0;
    font-size: 100%;
    left: -3.8em;
    width: 3em; /* works for line-numbers below 1000 lines */
    letter-spacing: -1px;
    border-right: 1px solid #999;

    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

}

    .line-numbers-rows > span {
        pointer-events: none;
        display: block;
        counter-increment: linenumber;
    }

        .line-numbers-rows > span:before {
            content: counter(linenumber);
            color: #999;
            display: block;
            padding-right: 0.8em;
            text-align: right;
        }


</style>
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    <script>
      $(document).foundation();

     
    </script>


  </body>
</html>
