<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  网络层 - 
  
  </title>
 <meta name="description" content="">
 <link href="atom.xml" rel="alternate" title="" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <h1><a href="index.html"></a></h1>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; </span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>
      
        <li class="divider"></li>
        <li><label>network</label></li>

          
            <li><a title="网络层" href="16406143899741.html">网络层</a></li>
          
            <li><a title="数据链路层" href="16393212106516.html">数据链路层</a></li>
          
            <li><a title="计算机网络" href="16376768137573.html">计算机网络</a></li>
          

      
        <li class="divider"></li>
        <li><label>JS Pro</label></li>

          
            <li><a title="⭐️期约与异步函数" href="16402238078899.html">⭐️期约与异步函数</a></li>
          
            <li><a title="函数" href="16393591389076.html">函数</a></li>
          
            <li><a title="代理与反射" href="16393584526044.html">代理与反射</a></li>
          
            <li><a title="⭐️对象,类与面对对象编程" href="16382370352660.html">⭐️对象,类与面对对象编程</a></li>
          
            <li><a title="迭代器与生成器" href="16382368417536.html">迭代器与生成器</a></li>
          
            <li><a title="集合应用类型" href="16344851791468.html">集合应用类型</a></li>
          
            <li><a title="红宝书" href="16324468661377.html">红宝书</a></li>
          

      
        <li class="divider"></li>
        <li><label>Vue</label></li>

          
            <li><a title="Principle" href="16417423637971.html">Principle</a></li>
          
            <li><a title="Webpack" href="16401645826486.html">Webpack</a></li>
          
            <li><a title="vue cli" href="16401638058072.html">vue cli</a></li>
          
            <li><a title="vue router" href="16400576847027.html">vue router</a></li>
          

      
        <li class="divider"></li>
        <li><label>Trick</label></li>

          
            <li><a title="MySQL" href="16417742815461.html">MySQL</a></li>
          
            <li><a title="eslint - vue" href="16378340644786.html">eslint - vue</a></li>
          
            <li><a title="我也不知道这一页该叫什么🧐" href="16347422574488.html">我也不知道这一页该叫什么🧐</a></li>
          
            <li><a title="烦😶‍🌫️" href="16325412705266.html">烦😶‍🌫️</a></li>
          

      
      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">
                <nav>
                  <ul id="side-nav" class="side-nav">

                    
                      <li class="side-title"><span>network</span></li>
                        
                          <li><a title="网络层" href="16406143899741.html">网络层</a></li>
                        
                          <li><a title="数据链路层" href="16393212106516.html">数据链路层</a></li>
                        
                          <li><a title="计算机网络" href="16376768137573.html">计算机网络</a></li>
                        

                    
                      <li class="side-title"><span>JS Pro</span></li>
                        
                          <li><a title="⭐️期约与异步函数" href="16402238078899.html">⭐️期约与异步函数</a></li>
                        
                          <li><a title="函数" href="16393591389076.html">函数</a></li>
                        
                          <li><a title="代理与反射" href="16393584526044.html">代理与反射</a></li>
                        
                          <li><a title="⭐️对象,类与面对对象编程" href="16382370352660.html">⭐️对象,类与面对对象编程</a></li>
                        
                          <li><a title="迭代器与生成器" href="16382368417536.html">迭代器与生成器</a></li>
                        
                          <li><a title="集合应用类型" href="16344851791468.html">集合应用类型</a></li>
                        
                          <li><a title="红宝书" href="16324468661377.html">红宝书</a></li>
                        

                    
                      <li class="side-title"><span>Vue</span></li>
                        
                          <li><a title="Principle" href="16417423637971.html">Principle</a></li>
                        
                          <li><a title="Webpack" href="16401645826486.html">Webpack</a></li>
                        
                          <li><a title="vue cli" href="16401638058072.html">vue cli</a></li>
                        
                          <li><a title="vue router" href="16400576847027.html">vue router</a></li>
                        

                    
                      <li class="side-title"><span>Trick</span></li>
                        
                          <li><a title="MySQL" href="16417742815461.html">MySQL</a></li>
                        
                          <li><a title="eslint - vue" href="16378340644786.html">eslint - vue</a></li>
                        
                          <li><a title="我也不知道这一页该叫什么🧐" href="16347422574488.html">我也不知道这一页该叫什么🧐</a></li>
                        
                          <li><a title="烦😶‍🌫️" href="16325412705266.html">烦😶‍🌫️</a></li>
                        

                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 <div class="markdown-body">
<h1>网络层</h1>

<h2><a id="%E4%B8%80%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>一 基本概念</h2>
<blockquote>
<p>主要任务是把<strong>分组</strong>从源端传到目的端，为分组交换网上的不同主机提供通信服务。</p>
</blockquote>
<p>网络层传输单位是<strong>数据报</strong></p>
<p>功能：</p>
<ol>
<li>路由选择与分组转发 --- 最佳路径</li>
<li>异构网络互联</li>
<li>拥塞控制 --- 全局性</li>
</ol>
<h2><a id="%E4%BA%8C%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>二 数据交换方式</h2>
<h3><a id="2-1%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.1 电路交换</h3>
<blockquote>
<p>建立连接 =&gt; 通信 =&gt; 释放连接</p>
</blockquote>
<p>e.g.：电话网络</p>
<p>特点：独占资源</p>
<p>优点：</p>
<ol>
<li>通信时延小</li>
<li>有序传输</li>
<li>没有冲突</li>
<li>实时性强</li>
</ol>
<p>缺点：</p>
<ol>
<li>建立连接时间长</li>
<li>线路独占，使用效率低</li>
<li>灵活性差</li>
<li>无差错控制能力</li>
</ol>
<h3><a id="2-2%E6%8A%A5%E6%96%87%E4%BA%A4%E6%8D%A2" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.2 报文交换</h3>
<blockquote>
<p>报文：源应用发送的信息<strong>整体</strong>。</p>
</blockquote>
<p>特点：存储转发</p>
<p>优点：</p>
<ol>
<li>无需建立连接</li>
<li>存储转发，动态分配线路</li>
<li>线路可靠性较高</li>
<li>线路利用率较高</li>
<li>多目标服务</li>
</ol>
<p>缺点：</p>
<ol>
<li>有存储转发时延</li>
<li>报文大小不定，需要网络节点有较大缓存空间</li>
</ol>
<h3><a id="2-3%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.3 分组交换</h3>
<blockquote>
<p>分组：把大的数据块<strong>分割</strong>成小的数据块。</p>
</blockquote>
<p>特点：分组存储转发</p>
<p>优点：相对于报文交换，存储管理更容易 --- 对缓存要求更小</p>
<p>缺点：</p>
<ol>
<li>有存储转发时延 --- 会比报文交换小</li>
<li>需要传输额外的信息量</li>
<li>乱序到目的主机时，需对主机排序重组</li>
</ol>
<p>tip：<code>1字节（Byte）=8比特（bit）</code></p>
<h4><a id="2-3-1%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%96%B9%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.3.1 数据报方式</h4>
<blockquote>
<p>数据报方式为网络层提供<strong>无连接服务</strong>。 --- 因特网</p>
</blockquote>
<p><code>无连接服务</code>：不事先为分组的传输确定传输路径，每个分组独立确定传输路径，不同分组传输路径可能不同。</p>
<p>特点：</p>
<ol>
<li>无连接</li>
<li>每个分组携带源和目的地址</li>
<li>路由器根据分组的目的地址转发分组：<br />
基于路由协议/算法构建转发表 =&gt; 检索转发表 =&gt; 每个分组独立选路</li>
</ol>
<h4><a id="2-3-2%E8%99%9A%E7%94%B5%E8%B7%AF%E6%96%B9%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.3.2 虚电路方式</h4>
<blockquote>
<p>虚电路方式为网络层提供<strong>连接服务</strong>。 --- 数据报方式和电路交换方式的结合</p>
</blockquote>
<p><code>连接服务</code>：首先为分组的传输确定传输路径（建立连接），然后沿改路径（连接）传输系列分组，系列分组传输路径相同，传输结束后拆除连接。</p>
<p>虚电路：一条源主机到目的主机类似于电路的路径（逻辑连接），路径上所有结点都要维持这条虚电路的建立，都维持一张虚电路表，每一项纪录了一个打开的虚电路信息。</p>
<p>建立连接（虚电路建立） =&gt; 数据传输 =&gt; 释放连接（虚电路释放）</p>
<h4><a id="2-3-3%E6%95%B0%E6%8D%AE%E6%8A%A5%E8%99%9A%E7%94%B5%E8%B7%AF%E5%AF%B9%E6%AF%94" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.3.3 数据报&amp;虚电路 对比</h4>
<p><img src="media/16406143899741/16407862413167.jpg" alt="compare" /></p>
<h3><a id="2-4%E5%AF%B9%E6%AF%94" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.4 对比</h3>
<p><img src="media/16406143899741/16407029014872.jpg" alt="总结" /></p>
<h2><a id="%E4%B8%89%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95%E5%8F%8A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E6%A6%82%E8%BF%B0" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>三 路由算法及路由协议概述</h2>
<p>详见 八、九、十</p>
<h3><a id="3-1%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.1 路由算法</h3>
<blockquote>
<p>最佳路由：“最佳”只能是相对于某一种特定要求下得出的较为合理的选择而已。</p>
</blockquote>
<h4><a id="3-1-1%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.1.1 静态路由算法</h4>
<blockquote>
<p>管理员手工配置路由信息。</p>
</blockquote>
<p>缺点：路由更新慢，不适用大型网络。</p>
<h4><a id="3-1-2%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.1.2 动态路由算法</h4>
<blockquote>
<p>路由器间彼此交换信息，按照路由算法优化出路由表项。</p>
</blockquote>
<p>缺点：算法复杂，增加网络负担</p>
<h5><a id="%E5%85%A8%E5%B1%80%E6%80%A7%EF%BC%9A%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95ospf" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>全局性：链路状态路由算法 <code>OSPF</code></h5>
<blockquote>
<p>所有路由器掌握完整的网络拓扑和链路费用信息。 --- 适用大型网络</p>
</blockquote>
<h5><a id="%E5%88%86%E6%95%A3%E6%80%A7%EF%BC%9A%E8%B7%9D%E7%A6%BB%E5%90%91%E9%87%8F%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95rip" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>分散性：距离向量路由算法 <code>RIP</code></h5>
<blockquote>
<p>路由器只掌握物理相连的邻居及链路费用。 --- 只适用小互联网</p>
</blockquote>
<h3><a id="3-2%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.2 路由协议</h3>
<p><code>分层次</code></p>
<blockquote>
<p><strong>自治系统AS</strong>：在单一的技术管理下的一组路由器，而这些路由器使用一种<strong>AS内部</strong>的路由选择协议和共同的度量以确定分组在该AS内的路由，同时还使用一种<strong>AS之间</strong>的路由协议以确定在AS之间的路由。</p>
</blockquote>
<p>一个AS内的所有网络都属于一个行政单位来管辖，一个自治系统的所有路由器在本自治系统内都必须连通。</p>
<h4><a id="3-2-1%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE-igp" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.2.1 内部网关协议 IGP</h4>
<p>一个<strong>AS内</strong>使用的 --- RIP、OSPF</p>
<h4><a id="3-2-2%E5%A4%96%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE-egp" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.2.2 外部网关协议 EGP</h4>
<p><strong>AS之间</strong>使用的 --- BGP</p>
<h2><a id="%E5%9B%9Bip%E6%95%B0%E6%8D%AE%E6%8A%A5" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>四 IP数据报</h2>
<p><img src="media/16406143899741/16412129771863.jpg" alt="TCP/IP协议栈" /></p>
<h3><a id="4-1-ip%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.1 IP数据报格式</h3>
<p><img src="media/16406143899741/16412134427117.jpg" alt="preview" /><br />
<img src="media/16406143899741/16412149786986.jpg" alt="detail" /></p>
<h3><a id="4-2%E6%9C%80%E5%A4%A7%E4%BC%A0%E8%BE%93%E5%8D%95%E5%85%83-mtu" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.2 最大传输单元MTU</h3>
<blockquote>
<p>链路层数据帧可封装数据有上限。以太网的MTU是<code>1500字节</code> --- 网络层数据分片</p>
</blockquote>
<p>首部含义：</p>
<ol>
<li>标识：同一数据报的分片使用同一标识。</li>
<li>标志：只有2位有意义<code>×__</code>
<ul>
<li>中间位DF (Don't Fragment)<br />
DF=1，禁止分片<br />
DF=0，允许分片</li>
<li>最低位MF ( More Fragment) <code>DF=1时才有效</code><br />
MF=1，后面“还有分片”<br />
MF=0，代表最后一片/没分片</li>
</ul>
</li>
<li>片偏移：指出较长分组分片后，某片在原分组中的相对位置。以<strong>8B</strong>为单位。</li>
</ol>
<p>除了最后一个分片，每个分片长度一定是<strong>8B的整数倍</strong>。</p>
<h3><a id="4-3-ipv4%E5%9C%B0%E5%9D%80" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.3 IPV4地址</h3>
<p><img src="media/16406143899741/16412176940275.jpg" alt="分类" /></p>
<p><img src="media/16406143899741/16412177234944.jpg" alt="特殊的IP地址" /></p>
<p><img src="media/16406143899741/16412180575030.jpg" alt="私有/专用IP地址" /></p>
<p><img src="media/16406143899741/16412182453395.jpg" alt="数量" /></p>
<h4><a id="4-3-1%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2-nat" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.3.1 网络地址转换 NAT</h4>
<p>NAT【Network Address Translation】</p>
<blockquote>
<p>在<strong>专用网</strong>连接到因特网的路由器上安装NAT软件，安装了NAT软件的路由器叫NAT路由器，它至少有一个有效的<strong>外部全球IP地址</strong>。</p>
</blockquote>
<h4><a id="4-3-2%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.3.2 子网划分</h4>
<p><img src="media/16406143899741/16420810711556.jpg" alt="子网划分" /></p>
<ul>
<li>子网掩码 --- 区分子网号和主机号的划分点</li>
</ul>
<h4><a id="4-3-3%E6%97%A0%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80-cidr" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.3.3 无分类编址 CIDR</h4>
<p>无分类域间路由选择【Classless Inter-Domain Routing】</p>
<ol>
<li>消除了传统的A类、B类、C类地址以及划分子网的概念。<code>网络前缀 + 主机号</code></li>
<li>融合子网地址与子网掩码，方便子网划分。<code>CIDR地址块</code> --- 网络前缀都相同</li>
</ol>
<p><img src="media/16406143899741/16420829126961.jpg" alt="CIDR" /></p>
<h3><a id="4-4%E6%9E%84%E6%88%90%E8%B6%85%E7%BD%91" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.4 构成超网</h3>
<blockquote>
<p>将多个子网聚合成一个较大的子网，叫做构成超网/路由聚合。<br />
方法：将网络前缀缩短。</p>
</blockquote>
<p>最长前缀匹配：使用CIDR时，查找路由表可能得到的几个匹配结果，应该选择具有<strong>最长</strong>网络前缀的路由。前缀越长，地址块越小，路由越具体。</p>
<h2><a id="%E4%BA%94arp%E5%8D%8F%E8%AE%AE" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>五 ARP协议</h2>
<p>数据链路层 -&gt; 网络层</p>
<p>地址解析协议【Address Resolution Protocol】</p>
<blockquote>
<p>完成主机或路由器IP地址到MAC地址的映射。</p>
</blockquote>
<h3><a id="5-1%E5%8F%91%E9%80%81%E6%95%B0%E6%8D%AE%E7%9A%84%E8%BF%87%E7%A8%8B" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>5.1 发送数据的过程</h3>
<p>局域网内传输：1 -&gt; 3<br />
<img src="media/16406143899741/16420843438446.jpg" alt="内" /></p>
<ul>
<li>ARP协议<strong>自动进行</strong></li>
</ul>
<h2><a id="%E5%85%AD%E4%B8%BB%E6%9C%BA%E8%8E%B7%E5%8F%96ip%E5%9C%B0%E5%9D%80%E7%9A%84%E5%8D%8F%E8%AE%AE" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>六 主机获取IP地址的协议</h2>
<p>网络层 -&gt; 传输层</p>
<h3><a id="6-1-dhcp%E5%8D%8F%E8%AE%AE" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>6.1 DHCP协议</h3>
<p>动态主机设置协议【Dynamic Host Configuration Protocol】</p>
<blockquote>
<p>是<strong>应用层</strong>协议，使用<strong>客户/服务器</strong>方式，客户端和服务器通过<strong>广播</strong>方式进行交互，基于<strong>UDP</strong>。</p>
</blockquote>
<p>DHCP提供<strong>即插即用</strong>联网的机制，主机可以从服务器动态获取IP地址、子网掩码、默认网关、DNS服务器名称与IP地址，允许<strong>地址复用</strong>，支持<strong>移动用户加入网络</strong>，支持<strong>在用地址续租</strong>。</p>
<ol>
<li>主机广播DHCP<strong>发现</strong>报文</li>
<li>DHCP服务器广播DHCP<strong>提供</strong>报文</li>
<li>主机广播DHCP<strong>请求</strong>报文</li>
<li>DHCP服务器广播DHCP<strong>确认</strong>报文</li>
</ol>
<h3><a id="6-2-icmp%E5%8D%8F%E8%AE%AE" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>6.2 ICMP协议</h3>
<p>互联网控制消息协议【Internet Control Message Protocol】</p>
<blockquote>
<p>用于网际协议中发送控制消息，提供可能发生在通信环境中的各种问题反馈。</p>
</blockquote>
<p><img src="media/16406143899741/16424292389566.jpg" alt="ICMP" /></p>
<h4><a id="6-2-1%E5%B7%AE%E9%94%99%E6%8A%A5%E6%96%87" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>6.2.1 差错报文</h4>
<blockquote>
<p>有差错数据直接丢弃 --- 但需返回指定信息（差错报文）</p>
</blockquote>
<p>差错报文类型：</p>
<ol>
<li>终点不可达</li>
<li>源点抑制 --- 已不使用</li>
<li>时间超过</li>
<li>参数问题</li>
<li>改变路由（重定向）</li>
</ol>
<p>差错报文数据字段：有差错的IP数据报 =&gt; ICMP报文<br />
<img src="media/16406143899741/16424296491092.jpg" alt="数据报" /></p>
<p>不发送ICMP差错报文的情况：<br />
1.对<strong>ICMP差错报告报文</strong>不再发送ICMP差错报告报文。<br />
2.对第一个分片的数据报片的所有<strong>后续数据报片</strong>都不发送ICMP差错报告报文。<br />
3.对具有<strong>组播地址</strong>的数据报都不发送ICMP差错报告报文。<br />
4.对具有<strong>特殊地址</strong>（如127.0.0.0或0.0.0.0）的数据报不发送ICMP差错报告报文。</p>
<h4><a id="6-2-2%E8%AF%A2%E9%97%AE%E6%8A%A5%E6%96%87" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>6.2.2 询问报文</h4>
<p>询问报文类型：<br />
1.回送请求和回答报文<br />
2.时间戳请求和回答报文<br />
3.掩码地址请求和回答报文 --- 已不使用<br />
4.路由器询问和通告报文 --- 已不使用</p>
<h4><a id="6-2-3-icmp%E5%BA%94%E7%94%A8" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>6.2.3 ICMP应用</h4>
<ol>
<li>PING：测试两个主机之间的连通性，使用了<strong>ICMP回送请求和回答报文</strong>。</li>
<li>Traceroute：跟踪一个分组从源点到终点的路径，使用了<strong>ICMP时间超过差错报告报文</strong>。</li>
</ol>
<h2><a id="%E4%B8%83ipv6" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>七 IPV6</h2>
<p>地址分配<strong>128位</strong>（16B）</p>
<h3><a id="7-1%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>7.1 数据报格式</h3>
<p>固定<strong>40B</strong>基本首部</p>
<p><img src="media/16406143899741/16424315179369.jpg" alt="IPV6" /></p>
<h3><a id="7-2%E5%8C%BA%E5%88%AB" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>7.2 区别</h3>
<ol>
<li>IPV6将地址从32位（4B）扩大到<strong>128位（16B）</strong>，更大的地址空间。</li>
<li>IPV6将1Pv4的<strong>校验和字段彻底移除</strong>，以减少每跳的处理时间。</li>
<li>IPV6将1Pv4的可选字段移出首部，变成了<strong>扩展首部</strong>，成为灵活的首部格式，路由器通常不对扩展首部进行检查，大大提高了路由器的处理效率。</li>
<li>IPV6支持<strong>即插即用</strong>（即自动配置），不需要DHCP协议。</li>
<li>IPV6首部长度必须是<strong>8B的整数倍</strong>，1Pv4首部是4B的整数倍。</li>
<li>IPv6<strong>只能在主机处分片</strong>，1Pv4可以在路由器和主机处分片。</li>
</ol>
<h3><a id="7-3%E5%9C%B0%E5%9D%80%E8%A1%A8%E7%A4%BA%E5%BD%A2%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>7.3 地址表示形式</h3>
<p><img src="media/16406143899741/16425150207470.jpg" alt="表示" /></p>
<h3><a id="7-4-ipv6%E5%90%91ipv4%E8%BF%87%E6%B8%A1%E7%9A%84%E7%AD%96%E7%95%A5" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>7.4 IPv6向IPv4过渡的策略</h3>
<ol>
<li>双栈协议</li>
<li>隧道技术</li>
</ol>
<h2><a id="%E5%85%ABrip%E5%8D%8F%E8%AE%AE" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>八 RIP协议</h2>
<p>路由信息协议【Routing Information Protocol】</p>
<blockquote>
<p>RIP是一种分布式的基于<strong>距离向量</strong>的路由选择协议，是因特网的协议标准。<code>简单</code></p>
</blockquote>
<p>RIP允许一条路由最多只能包含<code>15个</code>路由器，因此距离为<strong>16表示网络不可达</strong>。<br />
RIP协议只适用于小互联网。</p>
<h3><a id="8-1%E4%BF%A1%E6%81%AF%E4%BA%A4%E6%8D%A2" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>8.1 信息交换</h3>
<ol>
<li>仅和<strong>相邻路由器</strong>交换信息</li>
<li>路由器交换的信息是<strong>自己的路由表</strong>。</li>
<li><strong>每30s</strong>交换一次路由信息。</li>
</ol>


</div>

<br /><br />
<hr />

<div class="row clearfix">
  <div class="large-6 columns">
	<div class="text-left" style="padding:15px 0px;">
		
	        <a href="16417423637971.html"  title="Previous Post: Principle">&laquo; Principle</a>
	    
	</div>
  </div>
  <div class="large-6 columns">
	<div class="text-right" style="padding:15px 0px;">
		
	        <a href="16402238078899.html" 
	        title="Next Post: ⭐️期约与异步函数">⭐️期约与异步函数 &raquo;</a>
	    
	</div>
  </div>
</div>

<div class="row">
<div style="padding:0px 0.93em;" class="share-comments">

</div>
</div>
<script type="text/javascript">
	$(function(){
		var currentURL = '16406143899741.html';
		$('#side-nav a').each(function(){
			if($(this).attr('href') == currentURL){
				$(this).parent().addClass('active');
			}
		});
	});
</script>  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    



  














<style type="text/css">
figure{margin: 0.4em 0;padding: 0;}
  figcaption{text-align:center;}

/* PrismJS 1.14.0
 http://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript */
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
    color: black;
    background: none;
    text-shadow: 0 1px white;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
    
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
    
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
    text-shadow: none;
    background:#b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
    text-shadow: none;
    background: #b3d4fc;
}

@media print {
    code[class*="language-"],
    pre[class*="language-"] {
        text-shadow: none;
    }
}

/* Code blocks */
pre[class*="language-"] {
    padding: 1em;
    margin: .5em 0;
    overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
    background: #F7F7F7;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
    padding: .1em;
    border-radius: .3em;
    white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
    color: slategray;
}

.token.punctuation {
    color: #999;
}

.namespace {
    opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
    color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
    color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
    color: #9a6e3a;
    background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
    color: #07a;
}

.token.function,
.token.class-name {
    color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
    color: #e90;
}

.token.important,
.token.bold {
    font-weight: bold;
}
.token.italic {
    font-style: italic;
}

.token.entity {
    cursor: help;
}


pre[class*="language-"].line-numbers {
    position: relative;
    padding-left: 3.8em;
    counter-reset: linenumber;
}

pre[class*="language-"].line-numbers > code {
    position: relative;
    white-space: inherit;
}

.line-numbers .line-numbers-rows {
    position: absolute;
    pointer-events: none;
    top: 0;
    font-size: 100%;
    left: -3.8em;
    width: 3em; /* works for line-numbers below 1000 lines */
    letter-spacing: -1px;
    border-right: 1px solid #999;

    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

}

    .line-numbers-rows > span {
        pointer-events: none;
        display: block;
        counter-increment: linenumber;
    }

        .line-numbers-rows > span:before {
            content: counter(linenumber);
            color: #999;
            display: block;
            padding-right: 0.8em;
            text-align: right;
        }


</style>
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    <script>
      $(document).foundation();

     
    </script>


  </body>
</html>
